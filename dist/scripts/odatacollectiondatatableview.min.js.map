{"version":3,"sources":["scripts/odatacollectiondatatableview.min.js"],"names":["ODataCollectionDataTableView","Backbone","View","extend","render","_this","this","dataTable","destroy","$el","html","template","find","DataTable","ajax","data","callback","settings","fetchData","$count","$orderby","order","map","value","columns","column","dir","join","$skip","start","$top","length","search","$search","Promise","resolve","collection","fetch","then","toJSON","draw","recordsTotal","count","recordsFiltered","title","serverSide"],"mappings":"AAAA,aAKA,IAAIA,6BAA+BC,SAASC,KAAKC,QAChDC,OAAQ,WACP,IAAIC,EAAQC,KAERA,KAAKC,WAAWD,KAAKC,UAAUC,UACnCF,KAAKG,IAAIC,KAAKJ,KAAKK,UACnBL,KAAKG,IAAIG,KAAK,SAASC,WACtBC,KAAM,SAAcC,EAAMC,EAAUC,GACnC,IAAIC,GACHC,QAAQ,EACRC,SAAUL,EAAKM,MAAMC,IAAI,SAAUC,GAClC,OAAOR,EAAKS,QAAQD,EAAME,QAAQV,KAAO,IAAMQ,EAAMG,MACnDC,KAAK,KACRC,MAAOb,EAAKc,MACZC,KAAMf,EAAKgB,QAERhB,EAAKiB,QAAUjB,EAAKiB,OAAOT,QAAOL,EAAUe,QAAU,IAAOlB,EAAKiB,OAAOT,MAAQ,KACrFW,QAAQC,QAAQ9B,EAAM+B,WAAWC,OAAQtB,KAAMG,KAAcoB,KAAK,WACjEtB,GACCD,KAAMV,EAAM+B,WAAWG,SACvBC,KAAMzB,EAAKyB,KACXC,aAAcpC,EAAM+B,WAAWM,MAC/BC,gBAAiBtC,EAAM+B,WAAWM,WAIrClB,UACCT,KAAM,KACN6B,MAAO,OAEP7B,KAAM,OACN6B,MAAO,SAERC,YAAY,KAIdlC,SAAU","file":"odatacollectiondatatableview.min.js","sourcesContent":["'use strict';\n\n/* global Backbone */\n\n/* exported ODataCollectionDataTableView */\nvar ODataCollectionDataTableView = Backbone.View.extend({\n\trender: function render() {\n\t\tvar _this = this;\n\n\t\tif (this.dataTable) this.dataTable.destroy();\n\t\tthis.$el.html(this.template);\n\t\tthis.$el.find('table').DataTable({\n\t\t\tajax: function ajax(data, callback, settings) {\n\t\t\t\tvar fetchData = {\n\t\t\t\t\t$count: true,\n\t\t\t\t\t$orderby: data.order.map(function (value) {\n\t\t\t\t\t\treturn data.columns[value.column].data + ' ' + value.dir;\n\t\t\t\t\t}).join(','),\n\t\t\t\t\t$skip: data.start,\n\t\t\t\t\t$top: data.length\n\t\t\t\t};\n\t\t\t\tif (data.search && data.search.value) fetchData.$search = '\\'' + data.search.value + '\\'';\n\t\t\t\tPromise.resolve(_this.collection.fetch({ data: fetchData })).then(function () {\n\t\t\t\t\tcallback({\n\t\t\t\t\t\tdata: _this.collection.toJSON(),\n\t\t\t\t\t\tdraw: data.draw,\n\t\t\t\t\t\trecordsTotal: _this.collection.count,\n\t\t\t\t\t\trecordsFiltered: _this.collection.count\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tcolumns: [{\n\t\t\t\tdata: 'ID',\n\t\t\t\ttitle: 'ID'\n\t\t\t}, {\n\t\t\t\tdata: 'Name',\n\t\t\t\ttitle: 'Name'\n\t\t\t}],\n\t\t\tserverSide: true\n\t\t});\n\t},\n\n\ttemplate: '<table class=\"table\"></table>\\n'\n});"]}
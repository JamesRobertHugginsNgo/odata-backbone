{"version":3,"sources":["scripts/odatacollectiondatatableview.min.js"],"names":["ODataCollectionDataTableView","Backbone","View","extend","render","_this","this","dataTable","destroy","$el","html","template","find","DataTable","ajax","data","callback","settings","console","log","fetchData","$count","$orderby","order","map","value","columns","column","dir","join","$skip","start","$top","length","search","$search","Promise","resolve","collection","fetch","then","_iRecordsDisplay","_iRecordsTotal","toJSON","title","serverSide"],"mappings":"AAAA,aAKA,IAAIA,6BAA+BC,SAASC,KAAKC,QAChDC,OAAQ,WACP,IAAIC,EAAQC,KAERA,KAAKC,WAAWD,KAAKC,UAAUC,UACnCF,KAAKG,IAAIC,KAAKJ,KAAKK,UACnBL,KAAKG,IAAIG,KAAK,SAASC,WACtBC,KAAM,SAAcC,EAAMC,EAAUC,GACnCC,QAAQC,IAAI,OAAQJ,GACpBG,QAAQC,IAAI,WAAYF,GACxB,IAAIG,GACHC,QAAQ,EACRC,SAAUP,EAAKQ,MAAMC,IAAI,SAAUC,GAClC,OAAOV,EAAKW,QAAQD,EAAME,QAAQZ,KAAO,IAAMU,EAAMG,MACnDC,KAAK,KACRC,MAAOf,EAAKgB,MACZC,KAAMjB,EAAKkB,QAERlB,EAAKmB,QAAUnB,EAAKmB,OAAOT,QAAOL,EAAUe,QAAU,IAAOpB,EAAKmB,OAAOT,MAAQ,KACrFW,QAAQC,QAAQhC,EAAMiC,WAAWC,OAAQxB,KAAMK,KAAcoB,KAAK,WACjExB,GACCyB,iBAAkB1B,EAAK,gBACvB2B,eAAgB3B,EAAK,gBACrBA,KAAMV,EAAMiC,WAAWK,cAI1BjB,UACCX,KAAM,KACN6B,MAAO,OAEP7B,KAAM,OACN6B,MAAO,SAERC,YAAY,KAIdlC,SAAU","file":"odatacollectiondatatableview.min.js","sourcesContent":["'use strict';\n\n/* global Backbone */\n\n/* exported ODataCollectionDataTableView */\nvar ODataCollectionDataTableView = Backbone.View.extend({\n\trender: function render() {\n\t\tvar _this = this;\n\n\t\tif (this.dataTable) this.dataTable.destroy();\n\t\tthis.$el.html(this.template);\n\t\tthis.$el.find('table').DataTable({\n\t\t\tajax: function ajax(data, callback, settings) {\n\t\t\t\tconsole.log('DATA', data);\n\t\t\t\tconsole.log('SETTINGS', settings);\n\t\t\t\tvar fetchData = {\n\t\t\t\t\t$count: true,\n\t\t\t\t\t$orderby: data.order.map(function (value) {\n\t\t\t\t\t\treturn data.columns[value.column].data + ' ' + value.dir;\n\t\t\t\t\t}).join(','),\n\t\t\t\t\t$skip: data.start,\n\t\t\t\t\t$top: data.length\n\t\t\t\t};\n\t\t\t\tif (data.search && data.search.value) fetchData.$search = '\\'' + data.search.value + '\\'';\n\t\t\t\tPromise.resolve(_this.collection.fetch({ data: fetchData })).then(function () {\n\t\t\t\t\tcallback({\n\t\t\t\t\t\t_iRecordsDisplay: data['@odata.count'],\n\t\t\t\t\t\t_iRecordsTotal: data['@odata.count'],\n\t\t\t\t\t\tdata: _this.collection.toJSON()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tcolumns: [{\n\t\t\t\tdata: 'ID',\n\t\t\t\ttitle: 'ID'\n\t\t\t}, {\n\t\t\t\tdata: 'Name',\n\t\t\t\ttitle: 'Name'\n\t\t\t}],\n\t\t\tserverSide: true\n\t\t});\n\t},\n\n\ttemplate: '<table class=\"table\"></table>\\n'\n});"]}